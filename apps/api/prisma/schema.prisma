generator client {
    provider = "prisma-client"
    output   = "../src/database/infrastructure/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model PaymentMethodDB {
    payment_method_id String      @default(uuid())
    name              String      @unique
    active            Boolean     @default(false)
    created_at        DateTime    @default(now())
    updated_at        DateTime    @updatedAt
    IncomeDB          IncomeDB[]
    ExpenseDB         ExpenseDB[]

    @@id([payment_method_id])
    @@index([name, active])
    @@map("payment_method")
}

model IncomeDB {
    income_id         String          @id @default(uuid())
    amount            Int
    sender_name       String?         @db.VarChar(100) // Name of the person who sent the payment
    payment_note      String?         @db.Text // Optional note/message with the payment
    transaction_date  DateTime        @default(now()) // Date when the transaction occurred (from Excel's Fecha Operación)
    created_at        DateTime        @default(now())
    updated_at        DateTime        @updatedAt
    payment_method_id String
    PaymentMethodDB   PaymentMethodDB @relation(fields: [payment_method_id], references: [payment_method_id])

    @@map("income")
}

model ExpenseDB {
    expense_id        String          @id @default(uuid())
    amount            Int
    transaction_date  DateTime        @default(now()) // Date when the transaction occurred (from Excel's Fecha Operación)
    created_at        DateTime        @default(now())
    updated_at        DateTime        @updatedAt
    payment_method_id String
    PaymentMethodDB   PaymentMethodDB @relation(fields: [payment_method_id], references: [payment_method_id])

    @@map("expense")
}
